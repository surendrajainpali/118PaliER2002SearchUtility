<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <title>ER2002 Search Utility</title>
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 800px; margin: auto; }
    input { width: 100%; padding: 10px; font-size: 16px; margin-bottom: 20px; }
    table { width: 100%; border-collapse: collapse; font-size: 14px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    th { background-color: #f2f2f2; }
    tr:nth-child(even) { background-color: #fafafa; }
  </style>
</head>
<body>

<h2>üîç ‡§ñ‡•ã‡§ú‡•á‡§Ç ‡§®‡§æ‡§Æ, ‡§∏‡§Ç‡§¨‡§Ç‡§ß‡•Ä ‡§ï‡§æ ‡§®‡§æ‡§Æ, ‡§Ø‡§æ EPIC ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ</h2>
<input type="text" id="searchBox" placeholder="‡§Ø‡§π‡§æ‡§Å ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡•á‡§Ç..." oninput="searchData()" />

<table id="resultsTable">
  <thead>
    <tr>
      <th>Old AC No.</th>
      <th>Part No.</th>
      <th>S. NO.</th>
      <th>H. NO.</th>
      <th>Name</th>
      <th>Relative Name</th>
      <th>Age</th>
      <th>EPIC</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
let data = [];

Promise.all([
  fetch('chunks/data1.json').then(r => r.json()).catch(e => console.error('data1.json error', e)),
  fetch('chunks/data2.json').then(r => r.json()).catch(e => console.error('data2.json error', e)),
  fetch('chunks/data3.json').then(r => r.json()).catch(e => console.error('data3.json error', e)),
  fetch('chunks/data4.json').then(r => r.json()).catch(e => console.error('data4.json error', e)),
  fetch('chunks/data5.json').then(r => r.json()).catch(e => console.error('data5.json error', e)),
  fetch('chunks/data6.json').then(r => r.json()).catch(e => console.error('data6.json error', e)),
  fetch('chunks/data7.json').then(r => r.json()).catch(e => console.error('data7.json error', e)),
  fetch('chunks/data8.json').then(r => r.json()).catch(e => console.error('data8.json error', e)),
  fetch('chunks/data9.json').then(r => r.json()).catch(e => console.error('data9.json error', e))
]).then(chunks => {
  data = chunks.flat();
  console.log(`‚úÖ Loaded ${data.length} records`);
}).catch(err => {
  console.error('‚ùå Failed to load data:', err);
});

function searchData() {
  const query = document.getElementById('searchBox').value.toLowerCase();
  const tableBody = document.querySelector('#resultsTable tbody');
  tableBody.innerHTML = '';

  if (!query.trim()) return;

  const filtered = data.filter(row =>
    (row['Name'] && row['Name'].toLowerCase().includes(query)) ||
    (row['Relative Name'] && row['Relative Name'].toLowerCase().includes(query)) ||
    (row['EPIC'] && row['EPIC'].toLowerCase().includes(query))
  );

  filtered.forEach(row => {
    const tr = document.createElement('tr');
    ['Old AC No.', 'Part No.', 'S. NO.', 'H. NO.', 'Name', 'Relative Name', 'Age', 'EPIC'].forEach(key => {
      const td = document.createElement('td');
      td.textContent = row[key] || '';
      tr.appendChild(td);
    });
    tableBody.appendChild(tr);
  });
}
</script>

</body>
</html>
